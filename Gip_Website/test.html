<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>

    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Home</title>
    <link rel="stylesheet" href="css/bootstrap.min.css" />
    <link rel="stylesheet" href="css/Style.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Rubik:wght@600&display=swap" rel="stylesheet" />
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
</head>

<body>
    <div class="container justify-content-center mt-3">
        <table class="table table-hover">
            <thead>
                <th>Id</th>
                <th>Term English</th>
                <th>Description English</th>
                <th>Term Dutch</th>
                <th>Description Dutch</th>
                <th>Term French</th>
                <th>Description French</th>
                <th>Control Center</th>
            </thead>
            <tbody id="tbody1">

            </tbody>
        </table>
    </div>
    <!-- Modal -->
    <div class="modal fade" id="exampleModalCenter" tabindex="-1" role="dialog"
        aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLongTitle">Control Panel</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">

                    <label class="labs">Term English: </label>
                    <input type="text" id="TEMod"> <br>

                    <label class="labs">Description English: </label>
                    <input type="text" id="DEMod"> <br>

                    <label class="labs">Term Dutch: </label>
                    <input type="text" id="TDMod"> <br>

                    <label class="labs">Description Dutch: </label>
                    <input type="text" id="DDMod"> <br>

                    <label class="labs">Term French: </label>
                    <input type="text" id="TFMod"> <br>

                    <label class="labs">Description French: </label>
                    <input type="text" id="DFMod"> <br>
                </div>
                <div class="modal-footer">
                    <button id="AddModBtn" type="button" class="btn btn-primary" onclick="AddTerm()">Add New
                        Record</button>
                    <button id="UpdModBtn" type="button" class="btn btn-success" onclick="UpdTerm()">Update
                        Record</button>
                    <button id="DelModBtn" type="button" class="btn btn-danger" onclick="DelTerm()">Delete
                        Record</button>
                </div>
            </div>
        </div>
    </div>

    <script src="https://www.gstatic.com/firebasejs/7.15.5/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/7.15.5/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/7.15.5/firebase-database.js"></script>

    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"
        integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.12.9/dist/umd/popper.min.js"
        integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/js/bootstrap.min.js"
        integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
        crossorigin="anonymous"></script>


    <script id="MainScript">
        const firebaseConfig = {
            apiKey: "AIzaSyCXdz1pih1c3Fr98X9lRnOfosGQcL9tYYQ",
            authDomain: "lexicon-cc1cc.firebaseapp.com",
            databaseURL: "https://lexicon-cc1cc-default-rtdb.firebaseio.com",
            projectId: "lexicon-cc1cc",
            storageBucket: "lexicon-cc1cc.appspot.com",
            messagingSenderId: "101846407568",
            appId: "1:101846407568:web:b34c657d30623595d33b15",
            measurementId: "G-VXLJ7P0YNF"
        };
        firebase.initializeApp(firebaseConfig);

        var TmNo = 0;
        //GET DATA//
        function SelectAllData() {

            firebase.database().ref('Term/').on('value', (snapshot) => {
                snapshot.forEach((CurrentRecord) => {
                    var Id = CurrentRecord.key;
                    var TermEnglish = CurrentRecord.val().TermEnglish;
                    var DescriptionEnglish = CurrentRecord.val().DescriptionEnglish;
                    var TermDutch = CurrentRecord.val().TermDutch;
                    var DescriptionDutch = CurrentRecord.val().DescriptionDutch;
                    var TermFrench = CurrentRecord.val().TermFrench;
                    var DescriptionFrench = CurrentRecord.val().DescriptionFrench;
                    AddItemsToTable(Id, TermEnglish, DescriptionEnglish, TermDutch, DescriptionDutch, TermFrench, DescriptionFrench);
                });
            });
        }
        window.onload = SelectAllData;
        var TermList = [];

        function AddItemsToTable(TermEnglish, DescriptionEnglish, TermDutch, DescriptionDutch, TermFrench, DescriptionFrench) {
            var tbody1 = document.getElementById('tbody1');
            var trow = document.createElement('tr');
            var td0 = document.createElement('td');
            var td1 = document.createElement('td');
            var td2 = document.createElement('td');
            var td3 = document.createElement('td');
            var td4 = document.createElement('td');
            var td5 = document.createElement('td');
            var td6 = document.createElement('td');
            TermList.push([TermEnglish, DescriptionEnglish, TermDutch, DescriptionDutch, TermFrench, DescriptionFrench])
            td0.innerHTML = ++TmNo;
            td1.innerHTML = TermEnglish;
            td2.innerHTML = DescriptionEnglish;
            td3.innerHTML = TermDutch;
            td4.innerHTML = DescriptionDutch;
            td5.innerHTML = TermFrench;
            td6.innerHTML = DescriptionFrench;
            trow.appendChild(td0);
            trow.appendChild(td1);
            trow.appendChild(td2);
            trow.appendChild(td3);
            trow.appendChild(td4);
            trow.appendChild(td5);
            trow.appendChild(td6);
            

            var ControlDiv = document.createElement("div");
            ControlDiv.innerHTML = '<button type="button" class="btn btn-primary my-2" data-toggle="modal" data-target="#exampleModalCenter" onclick="FillTboxes(null)">Add New Record</button>'
            ControlDiv.innerHTML += '<button type="button" class="btn btn-primary my-2" data-toggle="modal" data-target="#exampleModalCenter" onclick="FillTboxes(' + TmNo + ')">Edit Record</button>'

            trow.appendChild(ControlDiv);
            tbody1.appendChild(trow);
        }
        var TEMod = document.getElementById('TEMod');
        var DEMod = document.getElementById('DEMod');
        var TDMod = document.getElementById('TDMod');
        var DDMod = document.getElementById('DDMod');
        var TFMod = document.getElementById('TFMod');
        var DFMod = document.getElementById('DFMod');

        var BTNmodAdd = document.getElementById('AddModBtn');
        var BTNmodUpd = document.getElementById('UpdModBtn');
        var BTNmodDel = document.getElementById('DelModBtn');

        function FillTboxes(index) {
            if (index == null) {
                TEMod.value = "";
                DEMod.value = "";
                TDMod.value = "";
                DDMod.value = "";
                TFMod.value = "";
                DFMod.value = "";
                BTNmodAdd.style.display = 'inline-block';
                BTNmodUpd.style.display = 'none';
                BTNmodDel.style.display = 'none';
            }
            else {
                --index;
                TEMod.value = TermList[index][0];
                DEMod.value = TermList[index][1];
                TDMod.value = TermList[index][2];
                DDMod.value = TermList[index][3];
                TFMod.value = TermList[index][4];
                DFMod.value = TermList[index][5];
                BTNmodAdd.style.display = 'none';
                BTNmodUpd.style.display = 'inline-block';
                BTNmodDel.style.display = 'inline-block';
            }
        }

    </script>
</body>

</html>